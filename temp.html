i want you to edit  method loadMap , in which there is a delete button at right for each children of type map(not pages).

use  this flask endpoint  to delete a map : 
```@app.route("/map/<int:map_id>/delete", methods=["GET"])
def delete_map(map_id):
    success,message = Map.delete(map_id)
    out = {
        "success":int(success),
        "message":message
    }
    return jsonify(out)
```

js script : ```class PageManager {
  constructor(history) {
    this.history = history;
    this.contentContainer = document.getElementById("content-container");
  }

  loadByType(id, type) {
    type === 'map' ? this.loadMap(id) : this.loadPage(id);
  }

  toggleContentEditable() {
    const container = document.getElementById("page-content");
    if (container.contentEditable === "inherit") {
      container.contentEditable = "false";
    }
    container.contentEditable = container.contentEditable === "true" ? "false" : "true";
    document.getElementById("page-edit-btn").innerHTML = container.contentEditable === "true" 
      ? '<i class="bi bi-check2-square"></i> SAVE' 
      : '<i class="bi bi-pencil-square"></i> EDIT';
    if (container.contentEditable === "false") {
      const content = container.innerHTML;
      const id = this.history.getCurrent().id;
      const token = get_CSRF();
      fetch(`/page/${id}/update`, {
      method: "PUT",
      headers: { 
        "Content-Type": "application/json",
        ...(token ? { "X-CSRF-Token": token } : {})
      },
      body: JSON.stringify({ content })
      });
    }
  }

  
  // --- NEW HELPER: make element draggable ---
  makeDraggable(el, data) {
    el.setAttribute("draggable", "true");
    el.addEventListener("dragstart", (e) => {
      e.dataTransfer.setData("application/json", JSON.stringify(data));
      e.dataTransfer.effectAllowed = "move";
    });
  }

  // --- NEW HELPER: make element a valid drop target ---
  makeDropTarget(el, targetMapId, parentMapId) {
    el.addEventListener("dragover", (e) => e.preventDefault());
    el.addEventListener("drop", async (e) => {
      e.preventDefault();
      const dropped = JSON.parse(e.dataTransfer.getData("application/json"));
      const { id: childId, type } = dropped;

      // Prevent dropping on itself
      if (type === "map" && childId === targetMapId) return;

      const token = get_CSRF();

      try {
        // 1. Add to new target map
        await fetch(`/map/${targetMapId}/child`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            ...(token ? { "X-CSRF-Token": token } : {})
          },
          body: JSON.stringify({
            child_id: childId,
            type: type === "map" ? 1 : 0
          })
        });

        // 2. Remove from old parent map
        if (parentMapId && parentMapId !== targetMapId) {
          await fetch(`/map/${parentMapId}/child/delete`, {
            method: "DELETE",
            headers: {
              "Content-Type": "application/json",
              ...(token ? { "X-CSRF-Token": token } : {})
            },
            body: JSON.stringify({
              child_id: childId,
              type: type === "map" ? 1 : 0
            })
          });
        }

        // 3. Reload current map view
        this.loadMap(parentMapId || targetMapId);
      } catch (err) {
        console.error("Drag-drop move failed:", err);
      }
    });
  }

  

 // --- MODIFIED loadMap() ---
  loadMap(id) {
    fetch(`/map/${id}/children`)
      .then(res => res.json())
      .then(data => {
        this.history.push(id, 'map');
        const container = document.getElementById("content-container");

        container.innerHTML = `
          ${data.parent_id ? `
            <div class="text-neon mb-3">
              <button class="btn btn-outline-warning btn-sm" onclick="app.pageManager.loadMap(${data.parent_id})">
                <i class="bi bi-arrow-up"></i> Back to Parent Map
              </button>
            </div>
          ` : ''}
          <div class="text-neon mb-4">
            <h3><i class="bi bi-diagram-3"></i> Sub Maps</h3>
            ${data.maps.length > 0 ? `
              <ul id="map-list" class="list-group shadow">
                ${data.maps.map(m => `
                  <li class='list-group-item bg-dark text-light border-secondary map-item'
                      data-id='${m.id}' data-type='map'>
                    <a style="text-decoration: none;cursor:pointer;" class='link-warning' 
                       onclick='app.pageManager.loadMap(${m.id})'>üó∫Ô∏è ${capitalize(m.title)}</a>
                  </li>`).join('')}
              </ul>
            ` : '<p class="text-muted">No sub maps available</p>'}
          </div>
          <div class="text-neon">
            <h3><i class="bi bi-file-earmark-text"></i> Pages</h3>
            ${data.pages.length > 0 ? `
              <ul id="page-list" class="list-group shadow">
                ${data.pages.map(p => `
                  <li class='list-group-item bg-dark text-light border-secondary page-item'
                      data-id='${p.id}' data-type='page'>
                    <a style="text-decoration: none;cursor:pointer;" class='link-info' 
                       onclick='app.pageManager.loadPage(${p.id})'>üìÑ ${capitalize(p.title)}</a>
                  </li>`).join('')}
              </ul>
            ` : '<p class="text-muted">No pages available</p>'}
          </div>`;

        // --- Add drag/drop behavior after DOM render ---
        const mapItems = container.querySelectorAll(".map-item");
        const pageItems = container.querySelectorAll(".page-item");

        // make all items draggable
        mapItems.forEach(li => this.makeDraggable(li, { id: parseInt(li.dataset.id), type: "map" }));
        pageItems.forEach(li => this.makeDraggable(li, { id: parseInt(li.dataset.id), type: "page" }));

        // make all maps droppable targets
        mapItems.forEach(li => {
          const targetMapId = parseInt(li.dataset.id);
          this.makeDropTarget(li, targetMapId, id);
        });

        // also make "Back to Parent Map" button a drop target (to move up)
        if (data.parent_id) {
          const parentButton = container.querySelector("button.btn-outline-warning");
          if (parentButton) {
            this.makeDropTarget(parentButton, data.parent_id, id);
          }
        }
      });
  }

  loadPage(id) {
    fetch(`/page/${id}`)
      .then(res => res.json())
      .then(data => {
        this.history.push(id, 'page');
        const container = this.contentContainer;

        container.innerHTML = `
          <div class="mb-4 border-bottom border-info pb-2">
            <h2 class="fw-bold text-info"><i class="bi bi-journal-richtext"></i> ${capitalize(data.content.title)}</h2>
          </div>
          <div id="page-content" class="text-light bg-dark p-3 rounded shadow">
            ${data.content.html}
          </div>`;
      });
  }
}
```