{
    "title": "concurrency control",
    "html": "<div class=\"markdown prose w-full break-words dark:prose-invert dark\"><h3 data-start=\"0\" data-end=\"37\" class=\"\"><strong data-start=\"4\" data-end=\"35\">Concurrency Control in DBMS</strong></h3>\n<p data-start=\"38\" data-end=\"274\" class=\"\">Concurrency control in a <strong data-start=\"63\" data-end=\"100\">Database Management System (DBMS)</strong> ensures <strong data-start=\"109\" data-end=\"185\">correct and consistent execution of multiple transactions simultaneously</strong> while maintaining <strong data-start=\"204\" data-end=\"272\">ACID properties (Atomicity, Consistency, Isolation, Durability).</strong></p>\n<hr data-start=\"276\" data-end=\"279\" class=\"\" style=\"\">\n<h2 data-start=\"281\" data-end=\"315\" class=\"\"><strong data-start=\"284\" data-end=\"315\">ğŸ”¹ Why Concurrency Control?</strong></h2>\n<p data-start=\"316\" data-end=\"396\" class=\"\">When multiple transactions run <strong data-start=\"347\" data-end=\"363\">concurrently</strong>, the following issues can occur:</p>\n<ol data-start=\"397\" data-end=\"835\">\n<li data-start=\"397\" data-end=\"474\" class=\"\" style=\"\">\n<p data-start=\"400\" data-end=\"474\" class=\"\"><strong data-start=\"400\" data-end=\"423\">Lost Update Problem</strong> â†’ Two transactions overwrite each other's updates.</p>\n</li>\n<li data-start=\"475\" data-end=\"545\" class=\"\" style=\"\">\n<p data-start=\"478\" data-end=\"545\" class=\"\"><strong data-start=\"478\" data-end=\"492\">Dirty Read</strong> â†’ A transaction reads uncommitted data from another.</p>\n</li>\n<li data-start=\"546\" data-end=\"652\" class=\"\" style=\"\">\n<p data-start=\"549\" data-end=\"652\" class=\"\"><strong data-start=\"549\" data-end=\"570\">Unrepeatable Read</strong> â†’ A transaction reads different values in different executions of the same query.</p>\n</li>\n<li data-start=\"653\" data-end=\"745\" class=\"\" style=\"\">\n<p data-start=\"656\" data-end=\"745\" class=\"\"><strong data-start=\"656\" data-end=\"672\">Phantom Read</strong> â†’ A transaction sees changes in a dataset caused by another transaction.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong style=\"background-color: rgb(16, 18, 24); color: rgb(238, 240, 255); font-family: &quot;Google Sans&quot;, Arial, sans-serif; font-size: var(--bs-body-font-size); text-align: var(--bs-body-text-align);\">Example:</strong></p><div class=\"vM0jzc\" style=\"color: var(--m3c10); letter-spacing: 0.1px; line-height: var(--m3t8); font-family: &quot;Google Sans&quot;, Arial, sans-serif; background-color: rgb(16, 18, 24);\"><span data-huuid=\"8596646899337931147\">Imagine a transaction (T1) reads a table of employees and finds 10 employees.&nbsp;</span><span data-huuid=\"8596646899337930620\">Then, another transaction (T2) inserts a new employee.&nbsp;</span><span data-huuid=\"8596646899337930093\">If T1 re-reads the table, it might find 11 employees, even though it didn't initially see that new employee,</span></div></li>\n<li data-start=\"746\" data-end=\"835\" class=\"\" style=\"\">\n<p data-start=\"749\" data-end=\"835\" class=\"\"><strong data-start=\"749\" data-end=\"763\">Write Skew</strong> â†’ Two transactions read a shared variable and update it inconsistently.</p>\n</li>\n</ol>\n<hr data-start=\"837\" data-end=\"840\" class=\"\" style=\"\">\n<h2 data-start=\"842\" data-end=\"882\" class=\"\"><strong data-start=\"845\" data-end=\"882\">ğŸ”¹ Concurrency Control Techniques</strong></h2>\n<p data-start=\"883\" data-end=\"914\" class=\"\">1ï¸âƒ£ <strong data-start=\"887\" data-end=\"914\">ğŸ”¹ Lock-Based Protocols</strong></p>\n<ul data-start=\"918\" data-end=\"1414\">\n<li data-start=\"918\" data-end=\"977\" class=\"\" style=\"\">\n<p data-start=\"920\" data-end=\"977\" class=\"\">Uses <strong data-start=\"925\" data-end=\"934\">locks</strong> (ğŸ”’) to manage access to database objects. similiar to solution of reader-writer problem.</p>\n</li>\n<li data-start=\"981\" data-end=\"1168\" class=\"\" style=\"\">\n<p data-start=\"983\" data-end=\"1002\" class=\"\"><strong data-start=\"983\" data-end=\"1001\">Types of Locks</strong>:</p>\n<ul data-start=\"1008\" data-end=\"1168\">\n<li data-start=\"1008\" data-end=\"1082\" class=\"\" style=\"\">\n<p data-start=\"1010\" data-end=\"1082\" class=\"\"><strong data-start=\"1010\" data-end=\"1048\">Shared Lock (S) â†’ Read-only access</strong> (multiple transactions can read).</p>\n</li>\n<li data-start=\"1088\" data-end=\"1168\" class=\"\" style=\"\">\n<p data-start=\"1090\" data-end=\"1168\" class=\"\"><strong data-start=\"1090\" data-end=\"1134\">Exclusive Lock (X) â†’ Read &amp; Write access</strong> (only one transaction at a time).</p>\n</li>\n</ul>\n</li>\n<li data-start=\"1172\" data-end=\"1414\" class=\"\" style=\"\">\n<p data-start=\"1174\" data-end=\"1202\" class=\"\"><strong data-start=\"1174\" data-end=\"1201\">Two-Phase Locking (2PL)</strong>:</p>\n<ul data-start=\"1208\" data-end=\"1414\">\n<li data-start=\"1208\" data-end=\"1263\" class=\"\" style=\"\">\n<p data-start=\"1210\" data-end=\"1263\" class=\"\"><strong data-start=\"1210\" data-end=\"1227\">Growing Phase</strong> â†’ A transaction acquires all locks.</p>\n</li>\n<li data-start=\"1269\" data-end=\"1350\" class=\"\" style=\"\">\n<p data-start=\"1271\" data-end=\"1350\" class=\"\"><strong data-start=\"1271\" data-end=\"1290\">Shrinking Phase</strong> â†’ A transaction releases locks but cannot acquire new ones.</p>\n</li>\n<li data-start=\"1356\" data-end=\"1414\" class=\"\" style=\"\">\n<p data-start=\"1358\" data-end=\"1414\" class=\"\">Ensures <strong data-start=\"1366\" data-end=\"1385\">serializability</strong> but may cause <strong data-start=\"1400\" data-end=\"1413\">deadlocks</strong>.</p>\n</li>\n</ul>\n</li>\n</ul>\n<p data-start=\"1416\" data-end=\"1452\" class=\"\">2ï¸âƒ£ <strong data-start=\"1420\" data-end=\"1452\">ğŸ”¹ Timestamp-Based Protocols</strong></p>\n<ul data-start=\"1456\" data-end=\"1748\">\n<li data-start=\"1456\" data-end=\"1501\" class=\"\" style=\"\">\n<p data-start=\"1458\" data-end=\"1501\" class=\"\">Each transaction gets a <strong data-start=\"1482\" data-end=\"1500\">timestamp (TS)</strong>.</p>\n</li>\n<li data-start=\"1505\" data-end=\"1685\" class=\"\" style=\"\">\n<p data-start=\"1507\" data-end=\"1517\" class=\"\"><strong data-start=\"1507\" data-end=\"1516\">Rules</strong>:</p>\n<ul data-start=\"1523\" data-end=\"1685\">\n<li data-start=\"1523\" data-end=\"1604\" class=\"\" style=\"\">\n<p data-start=\"1525\" data-end=\"1604\" class=\"\"><strong data-start=\"1525\" data-end=\"1604\">If T1 (older) tries to write &amp; T2 (newer) has already read â†’ T1 is aborted.</strong></p>\n</li>\n<li data-start=\"1610\" data-end=\"1685\" class=\"\" style=\"\">\n<p data-start=\"1612\" data-end=\"1685\" class=\"\"><strong data-start=\"1612\" data-end=\"1685\">If T1 (older) tries to read &amp; T2 (newer) has written â†’ T1 is aborted.</strong></p>\n</li>\n</ul>\n</li>\n<li data-start=\"1689\" data-end=\"1748\" class=\"\" style=\"\">\n<p data-start=\"1691\" data-end=\"1748\" class=\"\">Prevents deadlocks, but may cause <strong data-start=\"1725\" data-end=\"1747\">frequent rollbacks</strong>.</p>\n</li>\n</ul>\n<p data-start=\"1750\" data-end=\"1797\" class=\"\">3ï¸âƒ£ <strong data-start=\"1754\" data-end=\"1797\">ğŸ”¹ Optimistic Concurrency Control (OCC)</strong></p>\n<ul data-start=\"1801\" data-end=\"2220\">\n<li data-start=\"1801\" data-end=\"1893\" class=\"\" style=\"\">\n<p data-start=\"1803\" data-end=\"1893\" class=\"\">Instead of locking, transactions execute <strong data-start=\"1844\" data-end=\"1868\">without restrictions</strong> and validate at the end.</p>\n</li>\n<li data-start=\"1897\" data-end=\"2146\" class=\"\" style=\"\">\n<p data-start=\"1899\" data-end=\"1910\" class=\"\"><strong data-start=\"1899\" data-end=\"1909\">Phases</strong>:</p>\n<ol data-start=\"1916\" data-end=\"2146\">\n<li data-start=\"1916\" data-end=\"1977\" class=\"\" style=\"\">\n<p data-start=\"1919\" data-end=\"1977\" class=\"\"><strong data-start=\"1919\" data-end=\"1933\">Read Phase</strong> â†’ Transactions read and work independently.</p>\n</li>\n<li data-start=\"1983\" data-end=\"2049\" class=\"\" style=\"\">\n<p data-start=\"1986\" data-end=\"2049\" class=\"\"><strong data-start=\"1986\" data-end=\"2006\">Validation Phase</strong> â†’ Conflicts are checked before committing.</p>\n</li>\n<li data-start=\"2055\" data-end=\"2146\" class=\"\" style=\"\">\n<p data-start=\"2058\" data-end=\"2146\" class=\"\"><strong data-start=\"2058\" data-end=\"2073\">Write Phase</strong> â†’ If no conflicts, the transaction commits; otherwise, it's rolled back.</p>\n</li>\n</ol>\n</li>\n<li data-start=\"2150\" data-end=\"2220\" class=\"\" style=\"\">\n<p data-start=\"2152\" data-end=\"2220\" class=\"\">Works well when conflicts are <strong data-start=\"2182\" data-end=\"2190\">rare</strong> (e.g., read-heavy workloads).</p>\n</li>\n</ul>\n<p data-start=\"2222\" data-end=\"2273\" class=\"\">4ï¸âƒ£ <strong data-start=\"2226\" data-end=\"2273\">ğŸ”¹ Multi-Version Concurrency Control (MVCC)</strong></p>\n<ul data-start=\"2277\" data-end=\"2509\">\n<li data-start=\"2277\" data-end=\"2335\" class=\"\" style=\"\">\n<p data-start=\"2279\" data-end=\"2335\" class=\"\">Instead of locking, <strong data-start=\"2299\" data-end=\"2328\">multiple versions of data</strong> exist.</p>\n</li>\n<li data-start=\"2339\" data-end=\"2405\" class=\"\" style=\"\">\n<p data-start=\"2341\" data-end=\"2405\" class=\"\">Each transaction sees a consistent <strong data-start=\"2376\" data-end=\"2388\">snapshot</strong> of the database.</p>\n</li>\n<li data-start=\"2409\" data-end=\"2459\" class=\"\" style=\"\">\n<p data-start=\"2411\" data-end=\"2459\" class=\"\"><strong data-start=\"2411\" data-end=\"2458\">Example: PostgreSQL, Oracle, MySQL (InnoDB)</strong>.</p>\n</li>\n<li data-start=\"2463\" data-end=\"2509\" class=\"\" style=\"\">\n<p data-start=\"2465\" data-end=\"2509\" class=\"\">Solves <strong data-start=\"2472\" data-end=\"2496\">read-write conflicts</strong> efficiently.</p>\n</li>\n</ul>\n<p data-start=\"2511\" data-end=\"2549\" class=\"\">5ï¸âƒ£ <strong data-start=\"2515\" data-end=\"2549\">ğŸ”¹ Serialization Graph Testing</strong></p>\n<ul data-start=\"2553\" data-end=\"2712\">\n<li data-start=\"2553\" data-end=\"2616\" class=\"\" style=\"\">\n<p data-start=\"2555\" data-end=\"2616\" class=\"\">Maintains a <strong data-start=\"2567\" data-end=\"2599\">Directed Acyclic Graph (DAG)</strong> of transactions.</p>\n</li>\n<li data-start=\"2620\" data-end=\"2712\" class=\"\" style=\"\">\n<p data-start=\"2622\" data-end=\"2712\" class=\"\">If a <strong data-start=\"2627\" data-end=\"2636\">cycle</strong> is detected â†’ Transactions are <strong data-start=\"2668\" data-end=\"2683\">rolled back</strong> to maintain serializability.</p>\n</li>\n</ul>\n<hr data-start=\"2714\" data-end=\"2717\" class=\"\" style=\"\">\n<h2 data-start=\"2719\" data-end=\"2746\" class=\"\"><strong data-start=\"2722\" data-end=\"2746\">ğŸ”¹ Deadlock Handling</strong></h2>\n<p data-start=\"2747\" data-end=\"2841\" class=\"\">Deadlocks happen when transactions <strong data-start=\"2782\" data-end=\"2823\">wait for resources held by each other</strong>.<br data-start=\"2824\" data-end=\"2827\">\n<strong data-start=\"2827\" data-end=\"2841\">Solutions:</strong></p>\n<ul data-start=\"2842\" data-end=\"3116\">\n<li data-start=\"2842\" data-end=\"2955\" class=\"\" style=\"\">\n<p data-start=\"2844\" data-end=\"2955\" class=\"\"><strong data-start=\"2844\" data-end=\"2867\">Deadlock Prevention</strong> â†’ Assign priorities (timestamp-based) &amp; abort transactions <strong data-start=\"2927\" data-end=\"2937\">before</strong> deadlocks happen.</p>\n</li>\n<li data-start=\"2956\" data-end=\"3047\" class=\"\" style=\"\">\n<p data-start=\"2958\" data-end=\"3047\" class=\"\"><strong data-start=\"2958\" data-end=\"2980\">Deadlock Detection</strong> â†’ Use <strong data-start=\"2987\" data-end=\"3006\">wait-for graphs</strong> to detect cycles and abort transactions.</p>\n</li>\n<li data-start=\"3048\" data-end=\"3116\" class=\"\" style=\"\">\n<p data-start=\"3050\" data-end=\"3116\" class=\"\"><strong data-start=\"3050\" data-end=\"3067\">Timeout-Based</strong> â†’ If a transaction waits too long, it's aborted.</p>\n</li>\n</ul>\n<hr data-start=\"3118\" data-end=\"3121\" class=\"\" style=\"\">\n<h3 data-start=\"3123\" data-end=\"3139\" class=\"\"><strong data-start=\"3127\" data-end=\"3139\">ğŸ”¹ TL;DR</strong></h3>\n<p data-start=\"3140\" data-end=\"3502\" class=\"\">âœ… <strong data-start=\"3142\" data-end=\"3209\">Concurrency control prevents conflicts in multi-user databases.</strong><br data-start=\"3209\" data-end=\"3212\">\nâœ… <strong data-start=\"3214\" data-end=\"3280\">Locking (2PL) ensures serializability but may cause deadlocks.</strong><br data-start=\"3280\" data-end=\"3283\">\nâœ… <strong data-start=\"3285\" data-end=\"3351\">Timestamp ordering avoids deadlocks but may lead to rollbacks.</strong><br data-start=\"3351\" data-end=\"3354\">\nâœ… <strong data-start=\"3356\" data-end=\"3435\">MVCC allows multiple data versions for high performance (e.g., PostgreSQL).</strong><br data-start=\"3435\" data-end=\"3438\">\nâœ… <strong data-start=\"3440\" data-end=\"3499\">Optimistic control works best for read-heavy workloads.</strong> ğŸš€</p></div>"
}